<h1 class="panel-header">Consultation des données</h1>
<div class="view-page-container">

  <!-- SEARCH PANEL -->
  <div class="search-filters-panel">
    <form [formGroup]="searchForm">
      <search></search>

      <button
        mat-raised-button
        type="submit"
        color="primary"
        (click)="onSearchButtonClicked()"
        [disabled]="displayWaitPanel$ | async"
      >
        Lancer la recherche
      </button>

      <!-- RETURNS AN EXCEL FILE -->
      <mat-checkbox
        id="input-excel"
        name="input-excel"
        [formControl]="$any(searchForm.controls['excelMode'])"
        >Exporter les résultats dans un fichier Excel</mat-checkbox
      >
    </form>
  </div>

  <!-- RESULTS PANEL-->
  <ng-container
    *ngIf="
      !(displayWaitPanel$ | async)
    "
  >
    <mat-tab-group class="view-tab-group">
      <!-- DONNEES TABLE -->
      <mat-tab label="Données">
        <table-donnees></table-donnees>
      </mat-tab>
      <!-- ESPECES TABLE -->
      <mat-tab label="Espèces">
        <table-especes-with-nb-donnees></table-especes-with-nb-donnees>
      </mat-tab>
    </mat-tab-group>
  </ng-container>

  <!-- WAIT PANEL-->
  <div *ngIf="displayWaitPanel$ | async" style="text-align: center">
    <img
      src="../../../../../assets/img/green-bird.svg"
      alt="Oiseaux"
      height="200px"
    />
    <div>Les données arrivent...</div>
  </div>
</div>
